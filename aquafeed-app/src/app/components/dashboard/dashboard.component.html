<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="welcome-section">
        <h1>{{ getGreeting() }}, {{ user?.name || 'Usuario' }}!</h1>
        <p>Panel de Control AquaFeed</p>
      </div>
      <div class="header-actions">
        <button class="refresh-btn" (click)="refreshData()" [disabled]="isLoading">
          <span class="icon" [class.spinning]="isLoading">ğŸ”„</span>
          Actualizar
        </button>
        <button class="logout-btn" (click)="logout()">
          <span class="icon">ğŸšª</span>
          Cerrar SesiÃ³n
        </button>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Cargando datos del dashboard...</p>
  </div>

  <!-- Main Content -->
  <main *ngIf="!isLoading" class="dashboard-main">
    <!-- Stats Cards -->
    <section class="stats-section">
      <h2>EstadÃ­sticas del Sistema</h2>
      <div class="stats-grid">
        <div class="stat-card feeding-card">
          <div class="stat-icon">ğŸŸ</div>
          <div class="stat-content">
            <h3>Total de Alimentaciones</h3>
            <p class="stat-number">{{ dashboardData?.stats?.totalFeedings || 0 }}</p>
            <span class="stat-label">Alimentaciones registradas</span>
          </div>
        </div>

        <div class="stat-card devices-card">
          <div class="stat-icon">ğŸ“¡</div>
          <div class="stat-content">
            <h3>Dispositivos Activos</h3>
            <p class="stat-number">{{ dashboardData?.stats?.activeDevices || 0 }}</p>
            <span class="stat-label">Dispositivos conectados</span>
          </div>
        </div>

        <div class="stat-card update-card">
          <div class="stat-icon">â°</div>
          <div class="stat-content">
            <h3>Ãšltima ActualizaciÃ³n</h3>
            <p class="stat-time">{{ dashboardData?.stats?.lastUpdate | date:'short' }}</p>
            <span class="stat-label">Datos sincronizados</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="actions-section">
      <h2>Acciones RÃ¡pidas</h2>
      <div class="actions-grid">
        <button class="action-card">
          <div class="action-icon">ğŸ½ï¸</div>
          <h3>Alimentar Ahora</h3>
          <p>Ejecutar alimentaciÃ³n manual</p>
        </button>

        <button class="action-card">
          <div class="action-icon">ğŸ“Š</div>
          <h3>Ver Reportes</h3>
          <p>Consultar historial de alimentaciones</p>
        </button>

        <button class="action-card">
          <div class="action-icon">âš™ï¸</div>
          <h3>Configurar Horarios</h3>
          <p>Programar alimentaciones automÃ¡ticas</p>
        </button>

        <button class="action-card">
          <div class="action-icon">ğŸ“±</div>
          <h3>Estado de Dispositivos</h3>
          <p>Monitorear dispositivos conectados</p>
        </button>
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="activity-section">
      <h2>Actividad Reciente</h2>
      <div class="activity-list">
        <div class="activity-item">
          <div class="activity-icon">ğŸ½ï¸</div>
          <div class="activity-content">
            <h4>AlimentaciÃ³n AutomÃ¡tica</h4>
            <p>Tanque Principal - 15:30</p>
            <span class="activity-time">Hace 2 horas</span>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon">ğŸ“¡</div>
          <div class="activity-content">
            <h4>Dispositivo Conectado</h4>
            <p>Sensor de pH - Tanque 2</p>
            <span class="activity-time">Hace 4 horas</span>
          </div>
        </div>

        <div class="activity-item">
          <div class="activity-icon">âš™ï¸</div>
          <div class="activity-content">
            <h4>ConfiguraciÃ³n Actualizada</h4>
            <p>Horario de alimentaciÃ³n modificado</p>
            <span class="activity-time">Hace 6 horas</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- User Info Footer -->
  <footer class="dashboard-footer">
    <div class="user-info">
      <span class="user-details">
        <strong>{{ user?.name }}</strong> ({{ user?.username }}) - {{ user?.role === 'admin' ? 'Administrador' : 'Usuario' }}
      </span>
      <span class="user-email">{{ user?.email }}</span>
    </div>
  </footer>
</div>
